<launch>
  <!-- ******************************* Arguments ******************************* -->
  <arg name="config" default="celeros.config"/>
  <arg name="topics" default="[]" />
  <arg name="services" default="[]" />
  <arg name="app" default="celeros.app" />
  <arg name="hostname" default="$(env CELEROS_WORKER_HOSTNAME)" doc="used to specify the hostname for the celery worker in multirobot simulation. Default value should be the output of hostname but roslaunch is limited."/>
  <arg name="queues" default="$(arg hostname)"/>
  <arg name="loglevel" default="INFO" doc="INFO or DEBUG"/>
  <arg name="enable_cache" default="true"/>
  <arg name="connection_cache_list" default="/rocon/connection_cache/list" doc="topic to listen for connection cache list of connections"/>
  <arg name="connection_cache_diff" default="/rocon/connection_cache/diff" doc="topic to listen for differences in connection cache list of connections"/>

  <!-- celery worker -->
  <node pkg="celeros" name="celeros" type="worker" args=" -A $(arg app) --config $(arg config) --hostname $(arg hostname) --queues $(arg queues) --loglevel $(arg loglevel)">
    <param name="topics" value="$(arg topics)" type="str" />
    <param name="services" value="$(arg services)" type="str" />
    <param name="enable_cache" value="$(arg enable_cache)"/>
    <!-- remapping subscriber to plug into connection cache -->
    <remap from="~connections_list" to="$(arg connection_cache_list)"/>
    <remap from="~connections_diff" to="$(arg connection_cache_diff)"/>

  </node>

</launch>
